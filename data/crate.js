const CRATE = {
  'andaga': {
    'title': 'andaga',
    'template': 'mainTemplate',
    'body': [
      {
        'type': 'p',
        'text': '<a href="index.html#gyul">Lorem</a> ipsum dolor sit amet, consectetur adipiscing elit. Etiam quis accumsan purus. Pellentesque dui elit, egestas rutrum tempor et, commodo vel urna. Donec ornare dictum gravida. Donec fringilla tortor in eros volutpat pharetra. Vestibulum ornare, tellus non placerat tristique, nulla elit feugiat ligula, at dictum arcu velit ut libero. Integer in diam in felis hendrerit consectetur at sit amet sapien. Cras efficitur leo nec mi bibendum posuere vitae ac ex.'
      },
      {
        'type': 'p',
        'text': 'Etiam vitae maximus velit. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Maecenas euismod interdum condimentum. Nunc aliquet, ante eu pellentesque efficitur, erat nibh consequat lectus, ac cursus sapien mauris in felis. Donec dictum tellus ut nibh lacinia, at lobortis tortor porta. Donec rhoncus aliquet aliquet. Integer tortor lorem, porttitor eu congue vitae, scelerisque vel leo. Vestibulum non laoreet nibh, non commodo tellus. Proin ut semper nisi, et commodo magna. Pellentesque at sapien metus. Donec dictum eros eget lacus iaculis pretium. Ut maximus ligula pellentesque ante molestie, gravida tincidunt velit mollis. In vel cursus mi.'
      },
      {
        'type': 'p',
        'text': 'Nulla tincidunt convallis posuere. Praesent euismod ipsum et est laoreet, sed imperdiet eros accumsan. Nullam vitae aliquet tortor, in fringilla tellus. Aenean sit amet ante non odio lobortis consequat eget ut nisi. Sed at felis faucibus, cursus orci ut, commodo justo. Curabitur leo turpis, vulputate sit amet convallis sit amet, molestie eget neque. Nam sit amet fringilla eros.'
      },
      {
        'type': 'p',
        'text': 'Etiam tincidunt egestas magna, vel scelerisque quam dignissim id. Suspendisse dapibus orci in dolor semper venenatis vitae eget lorem. Nam rhoncus vel justo quis gravida. Etiam ligula sapien, feugiat ac diam nec, tempus laoreet ex. Donec nisl est, accumsan lobortis purus eget, tristique aliquam enim. Nulla facilisi. In facilisis pellentesque dolor ut finibus. Sed ac massa non mi finibus dictum. Nulla facilisi.'
      },
      {
        'type': 'p',
        'text': 'Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nunc tempus enim at ornare dapibus. Nunc est magna, vestibulum nec tempus sed, condimentum in mi. Proin vehicula turpis ut est porta eleifend. Etiam nisl odio, malesuada a quam ut, porta sodales nulla. Nunc tristique viverra malesuada. Duis feugiat placerat vestibulum. Nunc placerat tortor et mauris scelerisque sodales. Nulla facilisi. Phasellus iaculis fermentum nisi et mattis.'
      }
    ]
  },
  'chronica': {
    'title': 'andaga',
    'template': 'mainTemplate',
    'body': [
      {
        'type': 'p',
        'text': '<a href="index.html#gyul">Lorem</a> ipsum dolor sit amet, consectetur adipiscing elit. Etiam quis accumsan purus. Pellentesque dui elit, egestas rutrum tempor et, commodo vel urna. Donec ornare dictum gravida. Donec fringilla tortor in eros volutpat pharetra. Vestibulum ornare, tellus non placerat tristique, nulla elit feugiat ligula, at dictum arcu velit ut libero. Integer in diam in felis hendrerit consectetur at sit amet sapien. Cras efficitur leo nec mi bibendum posuere vitae ac ex.'
      },
      {
        'type': 'p',
        'text': 'Etiam vitae maximus velit. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Maecenas euismod interdum condimentum. Nunc aliquet, ante eu pellentesque efficitur, erat nibh consequat lectus, ac cursus sapien mauris in felis. Donec dictum tellus ut nibh lacinia, at lobortis tortor porta. Donec rhoncus aliquet aliquet. Integer tortor lorem, porttitor eu congue vitae, scelerisque vel leo. Vestibulum non laoreet nibh, non commodo tellus. Proin ut semper nisi, et commodo magna. Pellentesque at sapien metus. Donec dictum eros eget lacus iaculis pretium. Ut maximus ligula pellentesque ante molestie, gravida tincidunt velit mollis. In vel cursus mi.'
      },
      {
        'type': 'p',
        'text': 'Nulla tincidunt convallis posuere. Praesent euismod ipsum et est laoreet, sed imperdiet eros accumsan. Nullam vitae aliquet tortor, in fringilla tellus. Aenean sit amet ante non odio lobortis consequat eget ut nisi. Sed at felis faucibus, cursus orci ut, commodo justo. Curabitur leo turpis, vulputate sit amet convallis sit amet, molestie eget neque. Nam sit amet fringilla eros.'
      },
      {
        'type': 'p',
        'text': 'Etiam tincidunt egestas magna, vel scelerisque quam dignissim id. Suspendisse dapibus orci in dolor semper venenatis vitae eget lorem. Nam rhoncus vel justo quis gravida. Etiam ligula sapien, feugiat ac diam nec, tempus laoreet ex. Donec nisl est, accumsan lobortis purus eget, tristique aliquam enim. Nulla facilisi. In facilisis pellentesque dolor ut finibus. Sed ac massa non mi finibus dictum. Nulla facilisi.'
      },
      {
        'type': 'p',
        'text': 'Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nunc tempus enim at ornare dapibus. Nunc est magna, vestibulum nec tempus sed, condimentum in mi. Proin vehicula turpis ut est porta eleifend. Etiam nisl odio, malesuada a quam ut, porta sodales nulla. Nunc tristique viverra malesuada. Duis feugiat placerat vestibulum. Nunc placerat tortor et mauris scelerisque sodales. Nulla facilisi. Phasellus iaculis fermentum nisi et mattis.'
      }
    ]
  },
  'gyul': {
    'title': '귤 gyul',
    'template': 'mainTemplate',
    'body': [
      {
        'type': 'img',
        'attributes': [
          {
            'type': 'src',
            'value': 'media/gyul.png'
          },
          {
            'type': 'class',
            'value': 'main-image'
          }
        ]
      },
      {
        'type': 'p',
        'text': `Gyul is an attempt to make a small wiki engine that will seamlessly tie into my timetracker, <a href='index.html#andaga'>ándaga </a>.`
      },
      {
        'type': 'p',
        'text': `For a while I found myself reverting to large frameworks for simple tasks just because I knew the technology. There came a point where I realized the amount of overhead they brought for such simple tasks was not always necessary. I set out to create something small and simple. This is my effort at that endeavor. It doesn't to a ton, but does exactly what I need it to. It's also flexible enough that if needed to be adapted for another project, it can be.`
      }
    ]
  },
  'home': {
    'title': 'welcome',
    'template': 'homeTemplate',
    'body': [
      {
        'type': 'p',
        'text': `Feel free to explore. This is my collected works and logs. If you don't know here to start, you can get an introduction <a href='index.html#chronica'>here</a> or click on any of the projects below.`
      },
      {
        'type': 'div',
        'attributes': [
          {
            'type': 'class',
            'value': 'project-list'
          }
        ],
        'text': test(LOGS).join('')
      }
    ]
  },
  'missing': {
    'title': 'Missing',
    'template': 'mainTemplate',
    'body': [
      {
        'type': 'p',
        'text': `I'm unaware of this entry`
      }
    ]
  }
}

function createProjectObject (acc, cur) {
  acc[cur.project] = acc[cur.project] || {}
  acc[cur.project].time = acc[cur.project].time || 0
  acc[cur.project].entries = acc[cur.project].entries || 0
  acc[cur.project].time = acc[cur.project].time += cur.time
  acc[cur.project].entries = acc[cur.project].entries += 1
  return acc
}

function test (logs) {
  const logsObject = logs
    .filter(_ => _.project !== undefined)
    .reduce(createProjectObject, Object.create(null))
  const projects = Object.keys(logsObject)
  return projects
    .sort()
    .map(p => `<div>
                  <p>Project: <a href='index.html#${p}'>${p}</a><br>
                  Time: ${logsObject[p].time} minutes<br>
                  Entries: ${logsObject[p].entries} logs
                </div>`)
}
